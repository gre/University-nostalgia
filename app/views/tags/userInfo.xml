%{
  user = _user;
  withDetail = _withDetail;
}%

<userinfo>
  #{if user.isMe}
    <state name="isMe">c'est moi !</state>
  #{/if}
  #{if user.isFriend}
    <state name="isFriend">dans ma liste d'amis</state>
  #{/if}
  #{if user.isInvited}
    <state name="isInvited">invitation en attente</state>
  #{/if}
  #{if user.hasRequested}
    <state name="hasRequest">m'a invitÃ©</state>
  #{/if}
  <firstname>${user.firstname}</firstname>
  <lastname>${user.lastname}</lastname>
  #{if withDetail && (user.isFriend || user.isMe)}
    <email>${user.email}</email>
    <phone>${user.phone}</phone>
    <address>${user.address}</address>
  #{/if}
</userinfo>
